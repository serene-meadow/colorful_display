<!doctype html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Colorful Display</title>

    <link rel="icon" href="https://adrian-javid.github.io/favicon.png" type="image/png">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Colorful Display">
    <meta property="og:description" content="Interactable animated color gradient.">
    <meta property="og:url" content="https://adrian-javid.github.io/colorful_display/?">
    <meta property="og:type" content="website">

    <style>
        .emscripten { padding-right: 0; margin-left: auto; margin-right: auto; display: block; }
        /* the canvas *must not* have any border or padding, or mouse coords will be wrong */
        canvas.emscripten { border: 0px none; background-color: black; }
    </style>
    <link rel="stylesheet" type="text/css" href="style.css">

    <script>
        function showCanvas() {
            document.getElementById("epilepsy_warning").style.display = "none";
            
            Module.canvas.style.opacity = "0%";
            Module.canvas.style.display = "block";
            Module.canvas.style.height = "100%";
            Module.canvas.style.width = "100%";

            let script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "compiled/colorful_display.js";
            document.head.appendChild(script);

            script.onload = function() {
                console.log("Program loaded.");
                Module.canvas.classList.add("fade_in_animation");
            };
        }
    </script>
</head>

<body>
    <div id=epilepsy_warning>
        <h1>&#9888; WARNING &#9888;</h1>
        <p>This video may potentially trigger seizures for people with photosensitive epilepsy.</p>
        <p>Viewer discretion is advised.</p>
        <button onclick="showCanvas()">I understand; view video.</button>
    </div>

    <canvas class="emscripten" id="canvas" style="display: none;" oncontextmenu="event.preventDefault()" tabindex=-1></canvas>

    <script type='text/javascript'>
        var Module = {
            print: (function() {
                return (...args) => {
                let text = args.join(' ');
                console.log(text);
                };
            })(),
            printErr: function(text) {
                if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
                console.error(text);
            },
            canvas: (() => {
                let canvas = document.getElementById('canvas');

                // As a default initial behavior, pop up an alert when webgl context is lost. To make your
                // application robust, you may want to override this behavior before shipping!
                // See http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15.2
                canvas.addEventListener("webglcontextlost", (e) => { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);

                return canvas;
            })()
        };
    </script>

</body>

</html>
